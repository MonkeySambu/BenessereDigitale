<style>
    .grid{
        display: flex;
    }
    .separator{
        width: 100%;
        height: 5px;
        background-color: #bebebe;
    }
    h1{
        text-align: center;
    }
    table{
        width:100%;
        margin-left: auto;
        margin-right: auto;
    }
    div>div{
        width: 50%;
    }

    tr:nth-child(even) {
        background-color: #bebebe;
    }
    tr{
        row-gap: none;
    }
    td{
        gap: none;
        padding: none;
        margin: none;
        border: none;
    }
</style>
<article>
    <div class="grid">
        <div><canvas id="BarWeekChart" style="width:1000px"></canvas></div>
        <div><canvas id="CakeWeek"></canvas></div>
        <div>Tempo medio giornaliero al telefono: <span id="TIME"></span></div>
    </div>

</article>
<script>
    function graficoSettimana(){
        var sabApp=[];
        var sabTime=[];
        var domApp=[];
        var domTime=[];
        var lunApp=[];
        var lunTime=[];
        var marApp=[];
        var marTime=[];
        var merApp=[];
        var merTime=[];
        var gioApp=[];
        var gioTime=[];
        var venApp=[];
        var venTime=[];

        const colorArray = [
        "#981515", "#793FD1", "#AE3F5A", "#859933", "#8D53C6", "#AC77E1", "#8B4E99", "#227E22", "#205D1D", "#A38219",
        "#AB22E6", "#16448C", "#469F46", "#D49E32", "#58DB58", "#8E9C46", "#B886D1", "#318CE3", "#B48A9C", "#B4B8DC",
        "#CB7E3D", "#73AC73", "#C0504D", "#DBB216", "#AF4425", "#D484E3", "#91C591", "#DDA0DD", "#B8F3B8", "#799D6A",
        "#C67171", "#C88121", "#8A2BE2", "#1E69A3", "#E34C38", "#E65C5C", "#B32F15", "#A8A8C0", "#549F54", "#B56666",
        "#9A7933", "#4590B4", "#7F7FBC", "#C08080", "#C88141", "#DC4C4C", "#2B65AD", "#6785A8", "#A23333", "#5E5EAA",
        "#71C671", "#778899", "#9370DB", "#66CDAA", "#9A32CD", "#C7EDCC", "#D7D7D7", "#FF4500", "#808069", "#3A5FCD",
        "#4682B4", "#8B4789", "#0B86B8", "#D15FEE", "#A9A9A9", "#CD5555", "#E16941", "#DAA520", "#2F4F4F", "#BC8F8F",
        "#DCDCDC", "#D2B48C", "#B03060", "#98F5FF", "#ADFF2F", "#FFD700", "#FF69B4", "#E6E6FA", "#B4CDCD", "#CD96CD",
        "#C0FF3E", "#8B2252", "#FF83FA", "#32CD32", "#7A67EE", "#E3A869", "#DEB887", "#556B2F", "#C0FF3E", "#4EEE94",
        "#FA8072", "#4682B4", "#FFF68F", "#66CDAA", "#008B8B", "#FFA07A", "#FAA460", "#9ACD32", "#ADFF2F", "#32CD32",
        "#8A2BE2", "#DAA520", "#D2B48C", "#8B008B", "#5F9EA0", "#FF6347", "#FF7F50", "#CD5C5C", "#40E0D0", "#4B0082",
        "#7FFF00", "#9370DB", "#A0522D", "#CD5C5C", "#BA55D3", "#8B008B", "#8B8989", "#8B3E2F", "#8B4513", "#8A2BE2",
        "#87CEEB", "#8470FF", "#838B8B", "#808080", "#7FFFD4", "#76EEC6", "#708090", "#6A5ACD", "#6495ED", "#5F9EA0",
        "#556B2F", "#4B0082", "#483D8B", "#4682B4", "#458B00", "#32CD32", "#2E8B57", "#20B2AA", "#1E90FF", "#1C86EE",
        "#ff0000","#25d633","#4285f4","#d62976","#6441A5","#0000FF","#000000","lime","gray","lightblue","#C8BEAE","red",
        ];

        var color = [];
        for (var i = 0; i < 30; i++) {
            color[i]=colorArray[Math.floor(Math.random() * colorArray.length)];
        }

        sabApp[0]="YouTube";
        sabTime[0]="71,4";
        sabApp[1]="WhatsApp";
        sabTime[1]="40";
        sabApp[2]="Google";
        sabTime[2]="22";
        sabApp[3]="Instagram";
        sabTime[3]="20";
        sabApp[4]="Twich";
        sabTime[4]="10";
        sabApp[5]="Chrome";
        sabTime[5]="9";
        sabApp[6]="CieID";
        sabTime[6]="9";
        sabApp[7]="TikTok";
        sabTime[7]="8";
        sabApp[8]="Impostazioni";
        sabTime[8]="8";
        sabApp[9]="Spotify";
        sabTime[9]="6";
        sabApp[10]="BeReal";
        sabTime[10]="6";
        sabApp[11]="Orologio";
        sabTime[11]="4";
        sabApp[12]="Amazon";
        sabTime[12]="3";
        sabApp[13]="Classeviva";
        sabTime[13]="2";
        sabApp[14]="Fotocamera";
        sabTime[14]="1";

        domApp[0]="Twich";
        domTime[0]="67,2";
        domApp[1]="Clash Of Clans";
        domTime[1]="54";
        domApp[2]="WhatsApp";
        domTime[2]="45";
        domApp[3]="TikTok";
        domTime[3]="40";
        domApp[4]="YouTube";
        domTime[4]="27";
        domApp[5]="Amazon";
        domTime[5]="18";
        domApp[6]="Instagram";
        domTime[6]="17";
        domApp[7]="Google";
        domTime[7]="14";
        domApp[8]="BeReal";
        domTime[8]="7";
        domApp[9]="Fotocamera";
        domTime[9]="3";
        domApp[10]="Chrome";
        domTime[10]="2";

        lunApp[0]="YouTube";
        lunTime[0]="191,4";
        lunApp[1]="Documenti";
        lunTime[1]="79,8";
        lunApp[2]="WhatsApp";
        lunTime[2]="23";
        lunApp[3]="Instagram";
        lunTime[3]="16";
        lunApp[4]="TikTok";
        lunTime[4]="8";
        lunApp[5]="Calcolatrice";
        lunTime[5]="8";
        lunApp[6]="PS App";
        lunTime[6]="7";
        lunApp[7]="Classeviva";
        lunTime[7]="6";
        lunApp[8]="Drive";
        lunTime[8]="6";
        lunApp[9]="Google";
        lunTime[9]="6";
        lunApp[10]="Orologio";
        lunTime[10]="3";
        lunApp[11]="BeReal";
        lunTime[11]="2";
        lunApp[12]="Amazon";
        lunTime[12]="2";
        lunApp[13]="Classroom";
        lunTime[13]="1";
        lunApp[14]="Disney+";
        lunTime[14]="1";

        marApp[0]="YouTube";
        marTime[0]="61,2";
        marApp[1]="WhatsApp";
        marTime[1]="59";
        marApp[2]="Clash Of Clans";
        marTime[2]="52";
        marApp[3]="Twitch";
        marTime[3]="48";
        marApp[4]="Instagram";
        marTime[4]="28";
        marApp[5]="Spotify";
        marTime[5]="19";
        marApp[6]="TikTok";
        marTime[6]="7";
        marApp[7]="Google";
        marTime[7]="6";
        marApp[8]="X";
        marTime[8]="3";
        marApp[9]="Figma";
        marTime[9]="2";
        marApp[10]="BeReal";
        marTime[10]="2";
        marApp[11]="Play Store";
        marTime[11]="2";
        marApp[12]="Orologio";
        marTime[12]="2";
        marApp[13]="Documenti";
        marTime[13]="1";
        marApp[14]="Discord";
        marTime[14]="1";

        merApp[0]="WhatsApp";
        merTime[0]="88,8";
        merApp[1]="Twitch";
        merTime[1]="39";
        merApp[2]="YouTube";
        merTime[2]="12";
        merApp[3]="Instagram";
        merTime[3]="11";
        merApp[4]="Classroom";
        merTime[4]="9";
        merApp[5]="Chrome";
        merTime[5]="9";
        merApp[6]="Amazon";
        merTime[6]="8";
        merApp[7]="Google";
        merTime[7]="5";
        merApp[8]="Classeviva";
        merTime[8]="5";
        merApp[9]="Documenti";
        merTime[9]="5";
        merApp[10]="Clash Of Clans";
        merTime[10]="5";
        merApp[11]="Spotify";
        merTime[11]="4";
        merApp[12]="BeReal";
        merTime[12]="4";
        merApp[13]="Orologio";
        merTime[13]="4";
        merApp[14]="Telefono";
        merTime[14]="3";

        gioApp[0]="YouTube";
        gioTime[0]="90";
        gioApp[1]="Instagram";
        gioTime[1]="46";
        gioApp[2]="Disney+";
        gioTime[2]="35";
        gioApp[3]="WhatsApp";
        gioTime[3]="32";
        gioApp[4]="Prime Video";
        gioTime[4]="25";
        gioApp[5]="Twitch";
        gioTime[5]="13";
        gioApp[6]="Google";
        gioTime[6]="12";
        gioApp[7]="Orologio";
        gioTime[7]="5";
        gioApp[8]="BeReal";
        gioTime[8]="5";
        gioApp[9]="Figma";
        gioTime[9]="4";
        gioApp[10]="GitHub";
        gioTime[10]="4";
        gioApp[11]="Clash Of Clans";
        gioTime[11]="4";
        gioApp[12]="Classeviva";
        gioTime[12]="3";
        gioApp[13]="Spotify";
        gioTime[13]="2";
        gioApp[14]="Classroom";
        gioTime[14]="2";

        venApp[0]="YouTube";
        venTime[0]="132";
        venApp[1]="WhatsApp";
        venTime[1]="63";
        venApp[2]="Drive";
        venTime[2]="34";
        venApp[3]="Clash Of Clans";
        venTime[3]="26";
        venApp[4]="TikTok";
        venTime[4]="16";
        venApp[5]="Google";
        venTime[5]="15";
        venApp[6]="Instagram";
        venTime[6]="13";
        venApp[7]="Amazon";
        venTime[7]="10";
        venApp[8]="Classroom";
        venTime[8]="10";
        venApp[9]="Chrome";
        venTime[9]="7";
        venApp[10]="BeReal";
        venTime[10]="7";
        venApp[11]="Spotify";
        venTime[11]="5";
        venApp[12]="Trenitalia";
        venTime[12]="5";
        venApp[13]="Classeviva";
        venTime[13]="4";
        venApp[14]="ChatGPT";
        venTime[14]="2";

    // Nomi e tempi in array separati per ogni giorno della settimana
    var weekAppArrays = [sabApp, domApp, lunApp, marApp, merApp, gioApp, venApp];
    var weekTimeArrays = [sabTime, domTime, lunTime, marTime, merTime, gioTime, venTime];

    // Array per tenere traccia dei nomi e dei tempi totali
    var weekApp = [];
    var weekTime = [];

    // Itera su ciascun array della settimana
    for (var i = 0; i < weekAppArrays.length; i++) {
        var appArray = weekAppArrays[i];
        var timeArray = weekTimeArrays[i];

        // Itera su ciascun nome e tempo nell'array corrente
        for (var j = 0; j < appArray.length; j++) {
            var appName = appArray[j];
            var time = parseFloat(timeArray[j]); // Converte il tempo in un numero
            var index = weekApp.indexOf(appName);

            // Se il nome esiste già nell'array dei nomi totali, aggiorna il tempo corrente
            if (index !== -1) {
                weekTime[index] += time;
            } else { // Altrimenti, aggiungi il nome e il tempo all'array
                weekApp.push(appName);
                weekTime.push(time);
            }
        }
    }

    console.log(weekApp);

    new Chart("BarWeekChart", {
        type: 'bar',
        data: {
            labels:weekApp,
            datasets: [{
                backgroundColor:
                color,
                data: weekTime,
                borderColor:[
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)'
                ],
                borderWidth: 1,
            }],
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            legend: {
                display: false,
            },
                title: {
                    display: true,
                    text: 'App più usate durante la settimana',
                    fontSize: 20,
                }
            }
        });

    var TotalTime=[];
    TotalTime[0]=0;
    for(i=1; i<weekTime.length; i++){
        TotalTime[0]+=Number(weekTime[i]);

    }
    TotalTime[1]= 10080;
    console.log(TotalTime);

    new Chart("CakeWeek", {
        type: 'doughnut',
        data: {
            labels:['Tempo al Telefono', 'Tempo Libero'],
            datasets: [{
                backgroundColor:
                ['red','lime'],
                data: TotalTime,
                borderColor:[
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)'
                ],
                borderWidth: 1,
            }],
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            legend: {
                display: false,
            },
                title: {
                    display: true,
                    text: 'Tempo al telefono durante la settimana',
                    fontSize: 20,
                }
            }
        });
    $("#TIME").text((TotalTime[0]/7).toFixed(2)+" minuti");
    }
</script>